转载自：[Cloudflare薅羊毛系列之短链接生成器附带统计图表分析功能|Github开源|pages部署|Cloudflare羊毛小组成员|免费部署|免VPS项目](https://www.youtube.com/watch?v=PaGkJVx-ZiA)

## 项目特点
首先，这个项目虽然是免费的，但功能和性能都非常出色。短链接的slug，也就是短链接后面的识别码，可以自定义，也可以随机生成，甚至可以通过AI总结生成。此外，链接还可以设置有效期，过期后自动作废。这些功能在其他短链接系统中通常都是收费的，但这个项目却完全免费。

## 高级功能
针对所有的短链接，这个项目还提供了访问的统计图表预览，包括跳出网站、客户端的操作系统、所属地、使用语言等多个维度进行统计。这些功能基本上都得是收费的短链接系统才可以提供的功能。性能方面，得益于Cloudflare的加持，每个月最大访问量的上限非常高，可以忽略不计。

## 文档和部署
作者的官方文档非常细致，但没有中文版本。今天我就手把手带大家把这个免费的项目跑一遍，并搬到自己的Cloudflare Pages中。首先，我们需要打开作者的项目仓库，它的名字叫Sink，然后找到右上角的Fork按钮，将项目Fork到自己的GitHub账户下，保持名字不变并创建Fork。接下来，我们需要去Cloudflare，在左边找到Workers and Pages，右边有创建Application的按钮，点击并选择Pages，这会连接到GitHub。

## 设置与环境变量
如果是第一次连接GitHub，可能需要做一个交叉认证。选择GitHub的账户，并选择具体的仓库，这里使用的是Sink的仓库。然后开始设置，项目名称保持为Sink，框架预设选择Nuxt.js。接下来需要设置环境变量，根据官方文档需要设三个环境变量。

## 具体步骤
首先是NextSite的Token，就是网站密码，我填的是MilawanDino。然后是Cloudflare的账户ID，这个ID可以在Cloudflare首页的账户信息中找到，填上后再添加Cloudflare API的Token，这个Token需要在Cloudflare的账户属性中的API Tokens中创建，权限设置为账户分析的读权限。创建Token后，复制并填入相应的环境变量中。

## 部署项目
保存并部署项目，部署过程中可以忽略一些提示，因为还需要进行一些设置。在Cloudflare Pages中进入Settings Function，添加KV Namespace变量，名称为大写的KV。然后返回并在Function中添加相应的变量。还可以启用AI选项和分析引擎，这些都是默认不开启的功能，需要手动开启。

## 最终配置
配置完成后，重新部署项目，部署完成后可以通过Cloudflare提供的域名访问项目。访问项目后可以看到它的dashboard，点击进入后台，可以进行链接的创建和管理。创建链接时可以选择地址，slug可以随机生成或通过AI生成，还可以指定过期时间。如果不指定，链接将永不过期。

## 添加自定义域名
还可以添加自定义域名，直接在设置中输入域名即可，系统会自动进行设置，不需要手动修改CNAME或A记录。激活域名后，可以通过自定义域名访问项目页面。

## 修改展示页
如果不喜欢默认的展示页，可以根据官方文档中的变量设置进行修改。在环境变量中添加home的URL变量，设置为想要展示的网页地址。保存并重新部署后，首页将跳转到指定的网页地址